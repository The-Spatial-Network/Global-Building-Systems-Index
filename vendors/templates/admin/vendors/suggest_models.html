{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
<div class="module">
    <h1>AI Model Suggestions for {{ vendor.partner_name }}</h1>
    
    <div class="submit-row" style="margin-bottom: 20px;">
        <a href="{% url 'admin:vendors_buildingsystemvendor_change' vendor.id %}" class="button">← Back to Vendor</a>
    </div>
    
    {% if suggestions %}
        <p>Based on the vendor name and website, here are suggested models:</p>
        
        <form method="post">
            {% csrf_token %}
            
            <table>
                <thead>
                    <tr>
                        <th>Model Name</th>
                        <th>Description</th>
                        <th>Price Range</th>
                        <th>Specifications</th>
                    </tr>
                </thead>
                <tbody>
                    {% for suggestion in suggestions %}
                    <tr>
                        <td><strong>{{ suggestion.model_name }}</strong></td>
                        <td>{{ suggestion.description }}</td>
                        <td>{{ suggestion.price_range|default:"N/A" }}</td>
                        <td>
                            {% if suggestion.specifications %}
                                <ul style="margin: 0; padding-left: 20px;">
                                    {% for key, value in suggestion.specifications.items %}
                                        <li><strong>{{ key }}:</strong> {{ value }}</li>
                                    {% endfor %}
                                </ul>
                            {% else %}
                                N/A
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            
            <div class="submit-row" style="margin-top: 20px;">
                <input type="submit" value="Create All Models" class="default" />
                <a href="{% url 'admin:vendors_buildingsystemvendor_change' vendor.id %}" class="button">Cancel</a>
            </div>
        </form>
    {% else %}
        <p class="errornote">No suggestions could be generated. Please ensure the vendor has a website URL and try again.</p>
        <div class="submit-row">
            <a href="{% url 'admin:vendors_buildingsystemvendor_change' vendor.id %}" class="button">← Back to Vendor</a>
        </div>
    {% endif %}
</div>

<style>
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
    }
    
    th, td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    
    th {
        background-color: #417690;
        color: white;
        font-weight: bold;
    }
    
    tr:hover {
        background-color: #f5f5f5;
    }
</style>
{% endblock %}
